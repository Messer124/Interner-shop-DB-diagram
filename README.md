# База данных интернет-магазина
#### База данных интернет-магазина содержит информацию о продаваемых товарах, их категориях, производителях, магазинах, поставках товаров, изменений цен на товары, покупателях и покупках. База данных состоит из 9 таблиц:

## Описание
1. **categories (Категории)**
    * Таблица категорий (типов) товаров состоит из двух столбцов: столбца идентификатора категории и столбца наименования категории.
2. **manufacturers (Производители товара)**
    * В таблице содержится информация об идентификаторе производителя товара и его наименовании.
3. **products (Товары)**
    * В таблице содержатся идентификатор товара, его наименование, ссылка на идентификатор поставщика (внешний ключ), ссылка на идентификатор категории (внешний ключ), к которой относится товар.
4. **price_change (Изменения цен на товары)**
    * Цены на товары могут изменяться. Для учета изменения цен на товары используется таблица price_change. В таблице содержатся ссылка на товар (внешний ключ), дата изменения цены товара и новая цена. Таким образом, для того, чтобы узнать цену товара на заданную дату необходимо найти ближайшую дату (в прошлом) изменения его цены.
5. **stores (Магазины)**
    * В таблице содержаться идентификаторы филиалов и их наименования.
6. **deliveries (Поставки)**
    * В таблице содержатся идентификаторы поставленных товаров, филиал, куда бы поставлен товар, дата поставки и количество товара поставленного товара.
7. **customers (Клиенты)**
    * Таблица содержит идентификаторы и имена клиентов (покупателей).
8. **purchases (Покупки)**
    * Таблицу покупок можно представить как таблицу счетов на оплату товаров, покупаемых в рамках одной покупки (покупка характеризуется уникальным сочетанием: дата, покупатель, филиал). Таблица содержит идентификатор покупки, идентификатор покупателя, совершившего покупку, идентификатор филиала, где была совершена покупка, и дату покупки.
9. **purchase_item (Запись в счете)**
    * Таблица содержит информацию о товарах, купленных в рамках одной покупки (товары в счете на оплату). Для упрощения анализа информации о покупках в таблицу введено поле цена продукта, которое заполняется автоматически на основе цены товара на момент покупки.

---

## ДЗ 2. Индексы и ограничения
1. **deliveries**
    * При поиске связки delivery_date и  product_id, можно добавить индекс на поле delivery_date:
      > CREATE INDEX idx_ deliveries_ deliveryDate ON deliveries(delivery_date);
    * У поля product_count высокая кардинальность.
2. **purchases**
    * При поиске связки purchase_date + purchase_id, можно добавить индекс на поле purchase_date:
      > CREATE INDEX idx_purchases_purchaseDate ON purchases(purchase_date);
    * У поля purchase_id высокая кардинальность.
3. **customers**
    * Для быстрого поиска уникальных имен и фамилий, можно добавить составной индекс:
    > CREATE INDEX idx_customers_name_lastname ON customers(customer_fname, customer_lname);
    * Низкая кардинальность.
4. **purchase_items**
    * Ограничение на product_price. Поле не должно быть меньше 0:
       > product_price INT NOT NULL **CHECK (product_price > 0)**
5. **price_change**
    * Ограничение на new_price. Поле не должно быть меньше 0:
       > new_price INT NOT NULL **CHECK (new_price > 0)**



